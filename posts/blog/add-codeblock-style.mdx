---
title: mdx ë‚´ë¶€ codeblock ìŠ¤íƒ€ì¼ë§ í•˜ê¸° (feat. rehype-pretty-code)
description: ê±°ë¬´íŠ€íŠ€í•˜ê³  ëª»ìƒê¸´ ê¸°ë³¸ codeblock ëŒ€ì‹  ì˜ˆìœ codeblockì„ ì‚¬ìš©í•´ë³¼ê¹Œ?
date: 2023-07-20
series: Next.js - Blog
tags: [next.js, mdx, codeblock, rehype-pretty-code]
isPublished: true
imgUrl: add-codeblock-style.jpeg
---

ë°‹ë°‹í•œ ì½”ë“œ ë¸”ëŸ­ì— ë“œë””ì–´ ì˜ˆìœ ìŠ¤íƒ€ì¼ì„ ì¶”ê°€í–ˆë‹¤.

ë‚˜ëŠ” `rehype-pretty-code`ì„ ì‚¬ìš©í–ˆëŠ”ë°, ìš” ì•„ì´ë¥¼ ì‚¬ìš©í•˜ê¸° ìœ„í•´ì„œëŠ” ë‹¤ë¥¸ ë¼ì´ë¸ŒëŸ¬ë¦¬ë„ ì¶”ê°€ë¡œ ê°™ì´ ì„¤ì¹˜í•´ì¤˜ì•¼ í•œë‹¤.

## ë¼ì´ë¸ŒëŸ¬ë¦¬ ì„¤ì¹˜ ë° ì„¤ì • íŒŒì¼ ìˆ˜ì •

```shell
> yarn add rehype rehype-pretty-code shiki
```

`rehype-pretty-code`ì´ `rehype`ì™€ `shiki`ë¥¼ ê¸°ë³¸ìœ¼ë¡œ ë§Œë“¤ì–´ì¡Œê¸° ë•Œë¬¸ì— ìš” ì„¸ê°œ ë¼ì´ë¸ŒëŸ¬ë¦¬ë¥¼ ê°™ì´ ì„¤ì¹˜í•´ì•¼ í•œë‹¤. ì„¤ì¹˜ í›„ ê¸°ì¡´ mdx íŒŒì¼ì— ì ìš©í•˜ê¸° ìœ„í•´ `contentlayer.config.ts`ì—ì„œ í”ŒëŸ¬ê·¸ì¸ì— ì¶”ê°€í•œë‹¤.
(ì°¸ê³ : [contentlayer ê³µì‹ë¬¸ì„œ](https://www.contentlayer.dev/docs/sources/files/mdx-d747e46d#mdx-plugins-remarkrehype))

ë‚œ highlight.js ëŒ€ì‹  rehypePrettyCodeë¥¼ ì‚¬ìš©ì¤‘ì´ì—ˆê¸° ë•Œë¬¸ì— ì•„ë˜ì™€ ê°™ì´ ìˆ˜ì •í–ˆë‹¤.

```js
// contentlayer.config.ts

import remarkGfm from 'remark-gfm';
import rehypePrettyCode from 'rehype-pretty-code';

//...

const rehypeOptions = {
  theme: 'slack-dark',
  keepBackground: true,
};

export default makeSource({
  //..
  mdx: {
    remarkPlugins: [remarkGfm],
    rehypePlugins: [[rehypePrettyCode, rehypeOptions]],
  },
});
```

ğŸ“Œ ì°¸ê³ ë¡œ remarkGfmë¥¼ ì‚¬ìš©í•˜ë©´, mdxì—ì„œ tableì´ ì ìš©ëœë‹¤!

ë‚˜ëŠ” ì½”ë“œë¥¼ ìœ„ì²˜ëŸ¼ ìˆ˜ì •í–ˆì„ ë•Œ codeblockì˜ ìŠ¤íƒ€ì¼ì´ ì ìš©ë˜ì§€ ì•Šì•˜ë‹¤. ì´ìœ ë¥¼ ì•Œ ìˆ˜ ì—†ì–´ ë³„ì˜ë³„ ì‡¼ë¥¼ ë‹¤ í–ˆëŠ”ë°, ë‚˜ì¤‘ì— ë‹¤ë¥¸ ê°œë°œì ë¸”ë¡œê±°ì˜ contentlayer ì½”ë“œë¥¼ ë³´ë‹ˆ ë‚˜ì˜ PostëŠ” contentTypeì´ markdownì´ì—ˆë˜ ê²ƒ...^^... (allPostì˜ Post íƒ€ì…ì„ í™•ì¸í•´ë³´ë‹ˆ bodyê°€ Markdown íƒ€ì…ì´ì—ˆë‹¤.)

markdown -> mdxë¡œ ìˆ˜ì •í•˜ê¸° ìœ„í•´ contentlayer.config.tsì—ì„œ contentTypeì„ ì¶”ê°€í–ˆë‹¤. (ê¸°ë³¸ê°’ì€ markdownì¸ ë“¯ í•˜ë‹¤.)

```js
// contentlayer.config.ts

export const Post = defineDocumentType(() => ({
  name: 'Post',
  filePathPattern: `**/*.mdx`,
  contentType: 'mdx', // ğŸ’¡ ì¶”ê°€í•œë‹¤.
  fields: {
    title: { type: 'string', required: true },
    description: { type: 'string', required: false },
    tags: { type: 'list', of: { type: 'string' }, required: false },
    date: { type: 'date', required: true },
    isPublished: { type: 'boolean', required: true },
    imgUrl: { type: 'string', required: false },
  },
  computedFields: {
    url: { type: 'string', resolve: (post) => `${post._raw.flattenedPath}` },
  },
}));
```

## ê¸°ì¡´ ì½”ë“œ ìˆ˜ì •

contentTypeì„ mdxë¡œ ë°”ê¾¸ë©´ ì½”ë“œë¥¼ ìˆ˜ì •í•´ì•¼ í•  ë¶€ë¶„ì´ ìƒê¸´ë‹¤.

1. postì˜ contentëŠ” post.body.htmlê°€ ì•„ë‹Œ post.body.codeì—ì„œ ê°€ì ¸ì™€ì•¼ í•œë‹¤.
2. ì´ì „ì—ëŠ” post.body.htmlë¥¼ ì¼ë°˜ \<div\> íƒœê·¸ ë‚´ dangerouslySetInnerHTML=\{\{__html: post.body.html\}\}ì— ë°”ë¡œ ì ìš©ì‹œì¼°ë‹¤ë©´ mdx íƒ€ì…ì€ ì•„ë˜ì™€ ê°™ì´ `useMDXComponent`ë¥¼ ì‚¬ìš©í•´ì•¼ í•œë‹¤.

```tsx
import { useMDXComponent } from 'next-contentlayer/hooks';

const Post = ({ post }: Props) => {
  // ...
  const MDXContent = useMDXComponent(post.body.code);

  return (
    <div>
      //...
      <MDXContent />
      //...
    </div>
  )
}
```

## ë°”ë€ ìŠ¤íƒ€ì¼ë§ í™•ì¸

![ì ìš© ì „](../posts/blog/add-codeblock-style/before.png)

![ì ìš© í›„](../posts/blog/add-codeblock-style/after.png)
